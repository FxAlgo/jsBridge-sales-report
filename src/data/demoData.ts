import { DataTable, DateGroupingType, FetchRecord, FetchRecordSets, recordNumberToDate } from "./fetch";

export function demoData(datasets: DataTable[], type: DateGroupingType): FetchRecordSets {
	const result: FetchRecordSets = {};

	for (const dataset of datasets) {
		if (type === "year") {
			result[dataset] = dataset === "order" ? demoOrders : demoInvoices;
		} else if (type === "quarter") {
			result[dataset] = demoOrdersQ;
		} else {
			result[dataset] = demoOrdersM;
		}
	}
	return result;
}

function generateDemoData(type: DateGroupingType): FetchRecord[] {
	const data: FetchRecord[] = [];
	const from = recordNumberToDate(type);
	const now = new Date();
	const thisYear = now.getFullYear();

	for (let year = from.getFullYear(); year <= thisYear; year++) {
		const lastMonth = year === thisYear ? now.getMonth() + 1 : 12;
		for (let month = 1; month <= lastMonth; month++) {
			data.push([year.toString(), month.toString(), fakeData(1)[0].toString()]);
		}
	}
	return data;
}

function fakeData(count: number, min: number = 0, max: number = 1000000): number[] {
	const arr = [];
	for (let i = 0; i < count; i++) {
		arr.push(Math.floor(Math.random() * (max - min + 1)) + min);
	}
	return arr;
}

const demoOrders: FetchRecord[] = [
	["2019", "2019", "4262897.0200", null],
	["2019", "2019", "803122.6500", "New"],
	["2019", "2019", "5506312.6700", "Renewal"],
	["2019", "2019", "1853981.9000", "Upsell"],
	["2020", "2020", "1188490.4300", null],
	["2020", "2020", "614929.5000", "New"],
	["2020", "2020", "8335067.8800", "Renewal"],
	["2020", "2020", "1169508.7100", "Upsell"],
	["2021", "2021", "1767082.2800", null],
	["2021", "2021", "728090.6200", "New"],
	["2021", "2021", "10956069.0300", "Renewal"],
	["2021", "2021", "1720511.6900", "Upsell"],
	["2022", "2022", "2208.0000", null],
	["2022", "2022", "2276754.2800", "New"],
	["2022", "2022", "12087866.1700", "Renewal"],
	["2022", "2022", "2422846.4100", "Upsell"],
	["2023", "2023", "14976.0000", null],
	["2023", "2023", "737931.4500", "New"],
	["2023", "2023", "13055787.8700", "Renewal"],
	["2023", "2023", "1243470.6700", "Upsell"],
	["2024", "2024", "304679.2000", "New"],
	["2024", "2024", "7126167.7400", "Renewal"],
	["2024", "2024", "847851.7400", "Upsell"],
];

const demoOrdersQ: FetchRecord[] = [
	["2021", "3", "150212.9400", "Renewal"],
	["2021", "3", "32976.5900", "New"],
	["2021", "3", "137628.5700", "Upsell"],
	["2021", "4", "282923.2200", "New"],
	["2021", "4", "3460129.2500", "Renewal"],
	["2021", "4", "320621.3900", "Upsell"],
	["2022", "1", "95796.6500", "New"],
	["2022", "1", "3466881.9100", "Renewal"],
	["2022", "1", "452857.8300", "Upsell"],
	["2022", "2", "724722.1400", "New"],
	["2022", "2", "479449.7000", "Upsell"],
	["2022", "2", "2629960.7100", "Renewal"],
	["2022", "2", "2208.0000", null],
	["2022", "3", "3209613.7400", "Renewal"],
	["2022", "3", "1168894.9500", "New"],
	["2022", "3", "1010271.7500", "Upsell"],
	["2022", "4", "2781409.8100", "Renewal"],
	["2022", "4", "287340.5400", "New"],
	["2022", "4", "480267.1300", "Upsell"],
	["2023", "1", "169709.4000", "New"],
	["2023", "1", "2642497.7900", "Renewal"],
	["2023", "1", "362121.9600", "Upsell"],
	["2023", "2", "72344.3700", "New"],
	["2023", "2", "3395293.1000", "Renewal"],
	["2023", "2", "265979.0800", "Upsell"],
	["2023", "3", "128184.9000", "New"],
	["2023", "3", "14976.0000", null],
	["2023", "3", "3787572.3900", "Renewal"],
	["2023", "3", "316847.4500", "Upsell"],
	["2023", "4", "367692.7800", "New"],
	["2023", "4", "3230424.5900", "Renewal"],
	["2023", "4", "298522.1800", "Upsell"],
	["2024", "1", "185560.0600", "New"],
	["2024", "1", "2058542.9000", "Renewal"],
	["2024", "1", "293067.7700", "Upsell"],
	["2024", "2", "2525762.0000", "Renewal"],
	["2024", "2", "89176.9600", "New"],
	["2024", "2", "297413.8300", "Upsell"],
	["2024", "3", "257370.1400", "Upsell"],
	["2024", "3", "29942.1800", "New"],
	["2024", "3", "2541862.8400", "Renewal"],
];

const demoOrdersM: FetchRecord[] = [
	["2022", "9", "4857.6000", "New"],
	["2022", "9", "324880.0100", "Renewal"],
	["2022", "9", "11901.6000", "Upsell"],
	["2022", "10", "35942.6700", "New"],
	["2022", "10", "161509.9600", "Upsell"],
	["2022", "10", "483708.8000", "Renewal"],
	["2022", "11", "162594.6000", "New"],
	["2022", "11", "1047577.1600", "Renewal"],
	["2022", "11", "125518.0600", "Upsell"],
	["2022", "12", "88803.2700", "New"],
	["2022", "12", "193239.1100", "Upsell"],
	["2022", "12", "1250123.8500", "Renewal"],
	["2023", "1", "986661.0500", "Renewal"],
	["2023", "1", "142280.8800", "New"],
	["2023", "1", "48212.6300", "Upsell"],
	["2023", "2", "80074.5200", "Upsell"],
	["2023", "2", "686802.1400", "Renewal"],
	["2023", "2", "6303.9200", "New"],
	["2023", "3", "21124.6000", "New"],
	["2023", "3", "969034.6000", "Renewal"],
	["2023", "3", "233834.8100", "Upsell"],
	["2023", "4", "313.9500", "New"],
	["2023", "4", "1259017.8700", "Renewal"],
	["2023", "4", "66544.3100", "Upsell"],
	["2023", "5", "62519.1200", "Upsell"],
	["2023", "5", "807977.0200", "Renewal"],
	["2023", "5", "69517.3100", "New"],
	["2023", "6", "2513.1100", "New"],
	["2023", "6", "1328298.2100", "Renewal"],
	["2023", "6", "136915.6500", "Upsell"],
	["2023", "7", "25999.4600", "New"],
	["2023", "7", "169012.4800", "Upsell"],
	["2023", "7", "1163977.0500", "Renewal"],
	["2023", "8", "57440.6400", "Upsell"],
	["2023", "8", "1790961.6600", "Renewal"],
	["2023", "8", "92889.4800", "New"],
	["2023", "9", "14976.0000", null],
	["2023", "9", "9295.9600", "New"],
	["2023", "9", "832633.6800", "Renewal"],
	["2023", "9", "90394.3300", "Upsell"],
	["2023", "10", "94014.9400", "New"],
	["2023", "10", "722117.3700", "Renewal"],
	["2023", "10", "88304.6200", "Upsell"],
	["2023", "11", "128239.9000", "Upsell"],
	["2023", "11", "206146.3200", "New"],
	["2023", "11", "983669.7300", "Renewal"],
	["2023", "12", "1524637.4900", "Renewal"],
	["2023", "12", "67531.5200", "New"],
	["2023", "12", "81977.6600", "Upsell"],
	["2024", "1", "833470.2800", "Renewal"],
	["2024", "1", "2629.1900", "New"],
	["2024", "1", "80571.4500", "Upsell"],
	["2024", "2", "473493.6500", "Renewal"],
	["2024", "2", "12487.7100", "New"],
	["2024", "2", "90689.9600", "Upsell"],
	["2024", "3", "121806.3600", "Upsell"],
	["2024", "3", "170443.1600", "New"],
	["2024", "3", "751578.9700", "Renewal"],
	["2024", "4", "15673.6000", "New"],
	["2024", "4", "1088646.1500", "Renewal"],
	["2024", "4", "85647.4800", "Upsell"],
	["2024", "5", "73503.3600", "New"],
	["2024", "5", "147344.6600", "Upsell"],
	["2024", "5", "714114.3500", "Renewal"],
	["2024", "6", "723001.5000", "Renewal"],
	["2024", "6", "64421.6900", "Upsell"],
	["2024", "7", "1337950.3200", "Renewal"],
	["2024", "7", "16911.8800", "New"],
	["2024", "7", "115755.1100", "Upsell"],
	["2024", "8", "13030.3000", "New"],
	["2024", "8", "69653.8500", "Upsell"],
	["2024", "8", "836076.5600", "Renewal"],
	["2024", "9", "367835.9600", "Renewal"],
	["2024", "9", "71961.1800", "Upsell"],
];

const demoInvoices: FetchRecord[] = [
	["2024", "2024", "9233877.9500"],
	["2023", "2023", "15216462.3900"],
	["2022", "2022", "17319655.9200"],
	["2021", "2021", "14380315.2600"],
	["2020", "2020", "13256388.2900"],
	["2019", "2019", "12980774.1600"],
];
